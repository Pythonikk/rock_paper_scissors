<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Rock | Paper | Scissors</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<h1>
		Rock || Paper || Scissors
	</h1>
	<div class="buttons">
		<h3>
		Make Your Selection:
		</h3>
		<button id="btn-rock">Rock</button>
		<button id="btn-paper">Paper</button>
		<button id="btn-scissors">Scissors</button>
	</div>
	<div class="results">
	</div>
	<div class="score">
		<h3>
			You Vs. Computer
		</h3>
	</div>

	<script>
		let id;
		let playerSelection;

		let playerScore = 0;
		let compScore = 0;

		const rock = document.querySelector('#btn-rock');
		const paper = document.querySelector('#btn-paper');
		const scissors = document.querySelector('#btn-scissors');

		rock.addEventListener('click', whichButton);
		paper.addEventListener('click', whichButton);
		scissors.addEventListener('click', whichButton);

		function whichButton(event) {
			id = event.target.id;
			if (id == 'btn-rock') {
			playerSelection = 'rock';
			} else if (id == 'btn-paper') {
			playerSelection = 'paper';
			} else if (id == 'btn-scissors') {
			playerSelection = 'scissors';
			}
			return id;
		}

		rock.addEventListener('click', playRound);
		paper.addEventListener('click', playRound);
		scissors.addEventListener('click', playRound);

		const results = document.querySelector('.results');
		const paraResult = document.createElement('p');

		const score = document.querySelector('.score');
		const paraScore = document.createElement('p');

		results.appendChild(paraResult);
		score.appendChild(paraScore);

		function playRound() {
			let compSelection = computerPlay();

			function capitalize(word) {
				word = (word.slice(0, 1).toUpperCase()) + word.substr(1);
				return word;
			}

			function computerPlay() {
				const choices = ['rock', 'paper', 'scissors'];
				let choice = choices[Math.floor(Math.random() * choices.length)];
				return choice
			}

			if (playerSelection == 'rock' && compSelection == 'scissors' || playerSelection == 'paper' && compSelection == 'rock' || playerSelection == 'scissors' && compSelection == 'paper') {
				paraResult.textContent = ('You win! ' + capitalize(playerSelection) + ' beats ' + capitalize(compSelection) + '.');
				playerScore += 1;
				paraScore.textContent = (playerScore + ' : ' + compScore);

			} else if (playerSelection == compSelection) {
				paraResult.textContent = ('It\'s a tie! Throw down again.');
				paraScore.textContent = (playerScore + ' : ' + compScore);

			} else {
				paraResult.textContent = ('You lose. ' + capitalize(compSelection) + ' beats ' + capitalize(playerSelection) + '.');
				compScore += 1;
				paraScore.textContent = (playerScore + ' : ' + compScore);
			}

			if (playerScore == 5 || compScore == 5) {
				// remove all elements from the page
				document.documentElement.innerHTML = '';
				const body = document.querySelector('body');
				const header = document.createElement('h1');
				body.appendChild(header);

				if (playerScore == 5) {
					header.textContent = 'You Win! :)';
				} else {
					header.textContent = 'You Lose. :(';
				}
			}	
		}
	
	</script>
</body>
</html>